import java.util.ArrayList;
import java.util.Random;

public class ThreeOfTenLotteryTicket {
    private static int ticketsSold = 0; // static because this is class-level.  We want only one of these!
    private int ticketNumber;
    private ArrayList<Integer> picks;

    /**
     * Constructs a "quick pick" ticket, one for which numbers are picked randomly for the user
     * After the static variable ticketsSold has been incremented, ticketNumber is assigned the value of ticketsSold
     * the three integers assigned to picks are determined by calls to pickUniqueVal(), and the ticket is then validated
     */
    public ThreeOfTenLotteryTicket() { // a Quick Pick ticket
        ticketsSold++;
        ticketNumber = ticketsSold;
        for (int i = 0; i < 3; i++) {
            picks.add(pickUniqueVal());
        }
        if (!validate()) {
            throw new IllegalStateException("ticket invalid");
        }
    }

    /**
     * Constructs a ticket with numbers matching the users choices
     *
     * @param choices a reference to the array of int containing the user's three number choices
     *                ticketsSold and ticketNumber behave as in the default quick-pick constructor
     *                the ticket is validated after picks has been filled.
     */
    public ThreeOfTenLotteryTicket(int[] choices) { // user's choice lottery ticket
        for (int i = 0; i < 3; i++) {
            picks.add(choices[i]);
        }
        if (!validate()) {
            throw new IllegalStateException("ticket invalid");
        }
    }

    /**
     * @return an Integer with value in rage 1-10 inclusive such that
     * this Integers is NOT contained in the list picks.
     */
    private Integer pickUniqueVal() {
        Random rn = new Random();
        int n = rn.nextInt(10) + 1;
        if (picks.contains(n)) {
            n = rn.nextInt(10) + 1;
        }
        return n;
    }

    /*
        returns true only if picks contains 3 unique numbers in range 1-10
    */
    public boolean validate() {
        for (int i = 0; i < 3; i++) {
            int index = picks.get(i);
            if (i < 1 || i > 10) {
                return false;
            }
        }
        return true;
    }

    // returns true if this ticket matches winningTicket, containing the same numbers (order not important)
    public boolean grandPrizeWinner(ThreeOfTenLotteryTicket winningTicket) {
        for (int i = 0; i < 3; i++) {
            if (!this.picks.contains(winningTicket.picks.get(i))) {
                return false;
            }
        }
        return true;
    }

    public String toString() {
        return "3 of 10 lottery ticket #" + ticketNumber + ", picks: " + picks.toString();
    }

    public int getTicketNumber() {
        return ticketNumber;
    }

    public static void main(String[] args) {
        System.out.println("Let's test the 3 of 10 Lottery game!\n");
        int[] myNums = {1, 5, 9};

        ThreeOfTenLotteryTicket myTicket = new ThreeOfTenLotteryTicket(myNums);
        //LittleLotteryTicket winningTicket = new LittleLotteryTicket(myNums);  // used to test grandPrizeWinner
        int gamesPlayed = 0;
        boolean notRich = true;
        while (notRich) {
            ThreeOfTenLotteryTicket winningTicket = new ThreeOfTenLotteryTicket();
            gamesPlayed++;
            System.out.println("my ticket is " + myTicket);
            System.out.println("The winning ticket is " + winningTicket);
            if (myTicket.grandPrizeWinner(winningTicket)) {
                System.out.println("\nI won after " + gamesPlayed + " games!!! I'm rich!!! WoooooooooHoooooooooo!!!!");
                notRich = false;
            } else {
                System.out.println("Shucks......\n");
            }
        }
    }

}
